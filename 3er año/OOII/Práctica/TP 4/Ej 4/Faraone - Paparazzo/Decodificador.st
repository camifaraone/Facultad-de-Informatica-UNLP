TestCase subclass: #TestDecodificador	instanceVariableNames: 'deco peli1 peli2 peli3 peli4 peli5 peli6 col_resultado'	classVariableNames: ''	poolDictionaries: ''	category: 'Decodificador-Test'!!TestDecodificador methodsFor: 'running' stamp: 'Nico 5/31/2021 20:04'!setUp	"Instancia de un decodificador"	deco := Decodificador new.	"Creo las peliculas"	peli1 := Pelicula nuevaCon: 'Thor' puntaje: 7.9 anio: 2007.	peli2 := Pelicula nuevaCon: 'Capitan America' puntaje: 7.8 anio: 2016.	peli3 := Pelicula nuevaCon: 'Iron man' puntaje: 7.9 anio: 2010.	peli4 := Pelicula nuevaCon: 'Dunkirk' puntaje: 7.9 anio: 2017.	peli5 := Pelicula nuevaCon: 'Rocky' puntaje: 8.1 anio: 1976.	peli6 := Pelicula nuevaCon: 'Rambo' puntaje: 7.8 anio: 1979.	"Agregamos las peliculas similares de cada pelicula"	peli1		agregarSimilitudes: peli2;		agregarSimilitudes: peli3.	peli2		agregarSimilitudes: peli1;		agregarSimilitudes: peli3.	peli3		agregarSimilitudes: peli1;		agregarSimilitudes: peli2.	peli5 agregarSimilitudes: peli6.	peli6 agregarSimilitudes: peli5.	"Agregamos las peliculas a la grilla del decodificador"	deco		agregarPeliculaAGrilla: peli1;		agregarPeliculaAGrilla: peli2;		agregarPeliculaAGrilla: peli3;		agregarPeliculaAGrilla: peli4;		agregarPeliculaAGrilla: peli5;		agregarPeliculaAGrilla: peli6.	"Marco las peliculas como reproducidas"	deco		agregarPeliculaAReproducidas: peli1;		agregarPeliculaAReproducidas: peli5! !!TestDecodificador methodsFor: 'running' stamp: 'Nico 6/2/2021 20:58'!testPeliculasMejorPuntaje	"Configuro el decodificador con  el criterio Puntaje"	self configurarDecoEnPuntaje.		"Le pido las sugerencias al decodificador"	col_resultado := deco configuracion sugerirPeliculas.	"Verifico que el orden sea el correcto"	self assert: (col_resultado at: 1) equals: peli4.	self assert: (col_resultado at: 2) equals: peli3.	self assert: (col_resultado at: 3) equals: peli2! !!TestDecodificador methodsFor: 'running' stamp: 'Nico 5/31/2021 20:14'!testAgregarPeliculaALaGrilla	"verifico la cantidad de peliculas en la grilla"	self assert: deco cantidadDePeliculasEnGrilla equals: 6.	"Intento agregar una peli repetida. Como es una coleccion Set no lo va a permitir y sigo con 6 peliculas aÃ±adidas."	deco agregarPeliculaAGrilla: peli1.	"verifico la cantidad de peliculas en la grilla"	self assert: deco cantidadDePeliculasEnGrilla equals: 6.		"Creo y agrego una pelicula nueva"	deco agregarPeliculaAGrilla: (Pelicula nuevaCon: 'Thor 2' puntaje: 9.0 anio: 2009 ).		"verifico la cantidad de peliculas en la grilla. Deberia ser 7"	self assert: deco cantidadDePeliculasEnGrilla equals: 7. ! !!TestDecodificador methodsFor: 'running' stamp: 'Nico 6/2/2021 20:58'!testPeliculasMasNovedosas	"Configuro el decodificador con  el criterio Novedad"	self configurarDecoEnNovedad.		"Le pido las sugerencias al decodificador"	col_resultado := deco configuracion sugerirPeliculas.	"Verifico que el orden sea el correcto"	self assert: (col_resultado at: 1) equals: peli4.	self assert: (col_resultado at: 2) equals: peli2.	self assert: (col_resultado at: 3) equals: peli3! !!TestDecodificador methodsFor: 'running' stamp: 'Nico 5/31/2021 20:07'!testAgregarPeliculaAReproducidas	"verifico la cantidad de peliculas reproducidas. Deberia devolver 2"	self assert: deco cantidadReproducidas equals: 2.	"agrego la peli3 como reproducida y verifico nuevamente la cantidad. Deberia devolver 3"	deco agregarPeliculaAReproducidas: peli3.	self assert: deco cantidadReproducidas equals: 3! !!TestDecodificador methodsFor: 'as yet unclassified' stamp: 'Nico 6/2/2021 20:53'!configurarDecoEnNovedad	deco configuracion: (Novedad decodificador: deco cantidadSugerida: 3)! !!TestDecodificador methodsFor: 'as yet unclassified' stamp: 'Nico 6/2/2021 20:53'!configurarDecoEnSimilaridad	deco configuracion: (Similaridad decodificador: deco cantidadSugerida: 3)! !!TestDecodificador methodsFor: 'as yet unclassified' stamp: 'Nico 6/2/2021 21:00'!testPeliculasMasSimilares	"Configuro el decodificador con  el criterio Similaridad"	self configurarDecoEnSimilaridad.	"Le pido las sugerencias al decodificador"	col_resultado := deco configuracion sugerirPeliculas.		"Verifico que el orden sea el correcto"	self assert: (col_resultado at: 1) equals: peli2.	self assert: (col_resultado at: 2) equals: peli3.	self assert: (col_resultado at: 3) equals: peli6! !!TestDecodificador methodsFor: 'as yet unclassified' stamp: 'Nico 6/2/2021 20:36'!configurarDecoEnPuntaje	deco configuracion: (Puntaje decodificador: deco cantidadSugerida: 3).! !TestCase subclass: #TestPelicula	instanceVariableNames: 'peli1 peli2 peli3'	classVariableNames: ''	poolDictionaries: ''	category: 'Decodificador-Test'!!TestPelicula methodsFor: 'running' stamp: 'Nico 5/31/2021 18:04'!testSimilitudes	"Verifico si la pelicula tiene similitudes"	self assert: peli1 cantidadDeSimilares equals: 0.	"agrego una pelicula similar a la peli1"	peli1 agregarSimilitudes: peli2.	self assert: peli1 cantidadDeSimilares equals: 1.	"agrego una pelicula similar a la peli1"	peli1 agregarSimilitudes: peli3.	self assert: peli1 cantidadDeSimilares equals: 2! !!TestPelicula methodsFor: 'running' stamp: 'Nico 5/31/2021 18:02'!setUp	peli1 := Pelicula nuevaCon: 'Thor' puntaje: 7.9 anio: 2007.	peli2 := Pelicula nuevaCon: 'Capitan America' puntaje: 7.8 anio: 2016.	peli3 := Pelicula nuevaCon: 'Iron man' puntaje: 7.9 anio: 2010.	! !Object subclass: #Criterio	instanceVariableNames: 'decodificador cantidadSugerida'	classVariableNames: ''	poolDictionaries: ''	category: 'Decodificador-Model'!!Criterio commentStamp: 'Nicolas 5/25/2021 14:11' prior: 0!"Clase Criterio"!!Criterio methodsFor: 'as yet unclassified' stamp: 'Nico 5/27/2021 18:23'!sugerirPeliculas	self subclassResponsibility! !!Criterio methodsFor: 'accessing' stamp: 'Nico 6/2/2021 18:57'!cantidadSugerida: unaCantidadcantidadSugerida := unaCantidad ! !!Criterio methodsFor: 'accessing' stamp: 'Nicolas 5/25/2021 16:16'!decodificador: unDecodificador decodificador:= unDecodificador! !!Criterio methodsFor: 'accessing' stamp: 'Nico 6/2/2021 20:51'!cantidadSugerida^ cantidadSugerida! !!Criterio methodsFor: 'accessing' stamp: 'Nicolas 5/25/2021 15:48'!decodificador	^ decodificador! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Criterio class	instanceVariableNames: ''!!Criterio class methodsFor: 'accessing' stamp: 'Nico 6/2/2021 18:57'!decodificador: unDecodificador cantidadSugerida: unaCantidad	^ self new decodificador: unDecodificador; cantidadSugerida: unaCantidad ; yourself ! !Object subclass: #Decodificador	instanceVariableNames: 'grilla reproducidas configuracion'	classVariableNames: ''	poolDictionaries: ''	category: 'Decodificador-Model'!!Decodificador commentStamp: 'Nicolas 5/25/2021 17:05' prior: 0!"Clase Decodificador"!!Decodificador methodsFor: 'public' stamp: 'Nicolas 5/25/2021 15:19'!agregarPeliculaAGrilla: unaPelicula	grilla add: unaPelicula! !!Decodificador methodsFor: 'public' stamp: 'Nicolas 5/25/2021 15:31'!agregarPeliculaAReproducidas: unaPelicula	reproducidas  add: unaPelicula! !!Decodificador methodsFor: 'initialization' stamp: 'Nico 5/28/2021 18:33'!initialize	configuracion := nil.	reproducidas := Set new.	grilla := Set new! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 5/31/2021 18:07'!cantidadDePeliculasEnGrilla	^ grilla size! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 5/31/2021 12:13'!peliculasSimilaresDeReproducidas	^ (reproducidas collect: [ :pelicula | pelicula similitudes ])		flattened! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 6/2/2021 20:43'!peliculasMejorPuntuadas	^ self		peliculasNoReproducidasOrenadasPor: [ :peli1 :peli2 | 			peli1 puntaje > peli2 puntaje				or: [ peli1 puntaje = peli2 puntaje						and: [ peli1 anio > peli2 anio ] ] ]! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 5/31/2021 12:18'!noReproducidas	^ self grilla difference: self reproducidas! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 5/31/2021 12:13'!similaresNoReproducidas	^ self peliculasSimilaresDeReproducidas  difference: self reproducidas! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 5/31/2021 18:13'!cantidadReproducidas	^ reproducidas size! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 6/2/2021 19:01'!peliculasMasNovedosas	^ self		peliculasNoReproducidasOrenadasPor: [ :peli1 :peli2 | peli1 anio >= peli2 anio ]! !!Decodificador methodsFor: 'accessing' stamp: 'Nicolas 5/25/2021 15:29'!configuracion: unaConfiguracion	configuracion := unaConfiguracion! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 6/2/2021 20:52'!peliculasNoReproducidasOrenadasPor: unBloque	^ (self noReproducidas asSortedCollection: unBloque)! !!Decodificador methodsFor: 'accessing' stamp: 'Nicolas 5/25/2021 15:22'!configuracion	^ configuracion! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 5/31/2021 11:55'!reproducidas	^ reproducidas ! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 6/2/2021 20:52'!peliculasSimilaresOrenadasPor: unBloque	^ (self similaresNoReproducidas asSortedCollection: unBloque)	! !!Decodificador methodsFor: 'accessing' stamp: 'Nicolas 5/25/2021 15:22'!grilla	^ grilla! !!Decodificador methodsFor: 'accessing' stamp: 'Nico 5/31/2021 12:27'!peliculasMasSimilares	^ self		peliculasSimilaresOrenadasPor:  [ :peli1 :peli2 | peli1 anio >= peli2 anio ]! !Criterio subclass: #Novedad	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Decodificador-Model'!!Novedad commentStamp: 'Nicolas 5/25/2021 14:12' prior: 0!"Clase Novedad"!!Novedad methodsFor: 'as yet unclassified' stamp: 'Nico 6/2/2021 20:50'!sugerirPeliculas	^ self decodificador peliculasMasNovedosas takeFirst: self cantidadSugerida ! !Object subclass: #Pelicula	instanceVariableNames: 'titulo puntaje anio similitudes'	classVariableNames: ''	poolDictionaries: ''	category: 'Decodificador-Model'!!Pelicula commentStamp: 'Nicolas 5/25/2021 14:24' prior: 0!"Clase Pelicula"!!Pelicula methodsFor: 'accessing' stamp: 'Nicolas 5/25/2021 15:46'!puntaje	^ puntaje! !!Pelicula methodsFor: 'accessing' stamp: 'Nicolas 5/25/2021 15:46'!anio	^ anio! !!Pelicula methodsFor: 'as yet unclassified' stamp: 'Nico 5/31/2021 11:56'!similitudes^similitudes! !!Pelicula methodsFor: 'as yet unclassified' stamp: 'Nico 5/31/2021 18:00'!cantidadDeSimilares^ self similitudes size! !!Pelicula methodsFor: 'as yet unclassified' stamp: 'Nico 5/26/2021 18:52'!titulo: unTitulo puntaje: unPuntaje anio: unaAnio	titulo := unTitulo.	puntaje := unPuntaje.	anio := unaAnio.	similitudes := Set new! !!Pelicula methodsFor: 'as yet unclassified' stamp: 'Nicolas 5/25/2021 15:34'!agregarSimilitudes: unaPelicula	similitudes add: unaPelicula! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Pelicula class	instanceVariableNames: ''!!Pelicula class methodsFor: 'as yet unclassified' stamp: 'Nicolas 5/25/2021 14:51'!nuevaCon: unTitulo puntaje: unPuntaje anio: unAnio	^ self new		titulo: unTitulo		puntaje: unPuntaje		anio: unAnio! !Criterio subclass: #Puntaje	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Decodificador-Model'!!Puntaje commentStamp: 'Nicolas 5/25/2021 14:24' prior: 0!"Clase Puntaje"!!Puntaje methodsFor: 'as yet unclassified' stamp: 'Nico 6/2/2021 20:51'!sugerirPeliculas	^ self decodificador peliculasMejorPuntuadas takeFirst: self cantidadSugerida! !Criterio subclass: #Similaridad	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Decodificador-Model'!!Similaridad commentStamp: 'Nicolas 5/25/2021 14:24' prior: 0!Clase "Similaridad"!!Similaridad methodsFor: 'as yet unclassified' stamp: 'Nico 6/2/2021 20:51'!sugerirPeliculas	^ self decodificador peliculasMasSimilares takeFirst: self cantidadSugerida! !